(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{MmdM:function(e,t,i){"use strict";i.r(t),i.d(t,"UserQuizzesModule",(function(){return z}));var s=i("ofXK"),o=i("3Pt+"),r=i("njyG"),a=i("tyNb"),c=i("fXoL"),n=i("1kSV");function b(e,t){if(1&e&&(c.Qb(0,"tr"),c.Qb(1,"td"),c.yc(2),c.Pb(),c.Qb(3,"td",15),c.yc(4),c.Pb(),c.Pb()),2&e){const e=t.$implicit,i=c.cc(2);c.yb(2),c.zc(e.name),c.yb(2),c.zc(i.getOption(e).name)}}function d(e,t){if(1&e&&(c.Qb(0,"table",14),c.Qb(1,"thead"),c.Qb(2,"tr"),c.Qb(3,"th",15),c.yc(4,"Pregunta"),c.Pb(),c.Qb(5,"th",15),c.yc(6,"Respuesta"),c.Pb(),c.Pb(),c.Pb(),c.Qb(7,"tbody"),c.wc(8,b,5,2,"tr",16),c.Pb(),c.Pb()),2&e){const e=c.cc();c.yb(8),c.ic("ngForOf",e.userQuizSelected.quiz.questions)}}let l=(()=>{class e{constructor(e){this.activeModal=e}ngOnInit(){}getOption(e){let t;return e.options.forEach(e=>{e.selected&&(t=e)}),t}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(n.a))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-user-quizzes-detail"]],decls:37,vars:7,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row","mb-3"],[1,"col-lg-12"],[1,"row","mb-0"],[1,"col-sm-4","text-sm-right"],[1,"col-sm-8","text-sm-left"],[1,"mb-1"],["class","table table-sm row-border table-hover",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[1,"table","table-sm","row-border","table-hover"],[1,"text-center"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(c.Qb(0,"div",0),c.Qb(1,"h4",1),c.yc(2,"Ver registro"),c.Pb(),c.Qb(3,"button",2),c.ac("click",(function(){return t.activeModal.dismiss("Cross click")})),c.Qb(4,"span",3),c.yc(5,"\xd7"),c.Pb(),c.Pb(),c.Pb(),c.Qb(6,"div",4),c.Qb(7,"div",5),c.Qb(8,"div",6),c.Qb(9,"dl",7),c.Qb(10,"div",8),c.Qb(11,"dt"),c.yc(12,"DNI:"),c.Pb(),c.Pb(),c.Qb(13,"div",9),c.Qb(14,"dd",10),c.yc(15),c.Pb(),c.Pb(),c.Pb(),c.Qb(16,"dl",7),c.Qb(17,"div",8),c.Qb(18,"dt"),c.yc(19,"Nombre completo:"),c.Pb(),c.Pb(),c.Qb(20,"div",9),c.Qb(21,"dd",10),c.yc(22),c.Pb(),c.Pb(),c.Pb(),c.Qb(23,"dl",7),c.Qb(24,"div",8),c.Qb(25,"dt"),c.yc(26,"Fec. Registro:"),c.Pb(),c.Pb(),c.Qb(27,"div",9),c.Qb(28,"dd",10),c.yc(29),c.dc(30,"date"),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Qb(31,"div",5),c.Qb(32,"div",6),c.wc(33,d,9,1,"table",11),c.Pb(),c.Pb(),c.Pb(),c.Qb(34,"div",12),c.Qb(35,"button",13),c.ac("click",(function(){return t.activeModal.close("Close click")})),c.yc(36,"Cerrar"),c.Pb(),c.Pb()),2&e&&(c.yb(15),c.zc(t.userQuizSelected.employee.dni),c.yb(7),c.zc(t.userQuizSelected.employee.firstName+" "+t.userQuizSelected.employee.lastName),c.yb(7),c.zc(c.fc(30,4,t.userQuizSelected.date,"yyyy-MM-dd hh:mm a")),c.yb(4),c.ic("ngIf",t.userQuizSelected))},directives:[s.l,s.k],pipes:[s.d],styles:[""]}),e})();var u=i("oL12"),p=i("vpgt"),h=i("Cv5v");function m(e,t){if(1&e){const e=c.Rb();c.Qb(0,"tr"),c.Qb(1,"td"),c.yc(2),c.dc(3,"date"),c.Pb(),c.Qb(4,"td"),c.yc(5),c.Pb(),c.Qb(6,"td",17),c.Qb(7,"div",19),c.Qb(8,"button",20),c.ac("click",(function(){c.qc(e);const i=t.$implicit;return c.cc(2).view(i)})),c.Mb(9,"i",21),c.Pb(),c.Qb(10,"button",20),c.ac("click",(function(){c.qc(e);const i=t.$implicit,s=t.index;return c.cc(2).delete(i.id,s)})),c.Mb(11,"i",22),c.Pb(),c.Pb(),c.Pb(),c.Pb()}if(2&e){const e=t.$implicit;c.yb(2),c.zc(c.fc(3,2,e.date,"yyyy-MM-dd hh:mm a")),c.yb(3),c.zc(e.employee.firstName+" "+e.employee.lastName)}}function Q(e,t){if(1&e&&(c.Qb(0,"table",16),c.Qb(1,"thead"),c.Qb(2,"tr"),c.Qb(3,"th",17),c.yc(4,"Fecha"),c.Pb(),c.Qb(5,"th",17),c.yc(6,"Nombre completo"),c.Pb(),c.Mb(7,"th",17),c.Pb(),c.Pb(),c.Qb(8,"tbody"),c.wc(9,m,12,5,"tr",18),c.Pb(),c.Pb()),2&e){const e=c.cc();c.ic("dtOptions",e.dtOptions),c.yb(9),c.ic("ngForOf",e.userQuizzesFiltered)}}const y=[{path:"",children:[{path:"",component:(()=>{class e{constructor(e,t,i,s){this.modalService=e,this.appSettingsService=t,this.userQuizzesService=i,this.employeesService=s,this.userQuizzes=[],this.userQuizzesFiltered=[],this.isLoadingData=!1,this.searchText="",this.employees=[],this.dtOptions={info:!0,lengthChange:!1,processing:!0,searching:!1,responsive:!0,pagingType:"full_numbers",pageLength:15,dom:'<"html5buttons"B>lftip',buttons:[{extend:"copy",className:"btn-sm"},{extend:"csv",title:"Lista de registros",className:"btn-sm"},{extend:"excel",title:"Lista de registros",className:"btn-sm"},{extend:"pdf",title:"Lista de registros",className:"btn-sm"},{extend:"print",title:"Lista de registros",className:"btn-sm",customize(e){$(e.document.body).addClass("white-bg"),$(e.document.body).css("font-size","10px"),$(e.document.body).find("table").addClass("compact").css("font-size","inherit")}}],language:{emptyTable:"No hay datos disponibles",info:"Mostrando desde _START_ hasta _END_ de _TOTAL_ registros",infoEmpty:"Mostrando desde 0 hasta 0 de 0 registros",loadingRecords:"Cargando...",processing:"Procesando...",paginate:{first:"Ini.",last:"Fin",next:"Sig.",previous:"Ant."}},columnDefs:[{targets:0,responsivePriority:10001},{targets:1,responsivePriority:1},{targets:2,orderable:!1,responsivePriority:2}]}}ngOnInit(){this.loadUserQuizzes()}view(e){const t=this.modalService.open(l,{size:"lg"});t.result.then(this.onCloseModalForm.bind(this),this.onCloseModalForm.bind(this)),t.componentInstance.userQuizSelected=e}delete(e,t){this.userQuizzesService.delete(e).then(()=>{this.userQuizzes.splice(t,1)}).catch(e=>{console.error(e)})}onCloseModalForm(e){if(e===Object(e))if(e.createMode)e.userQuiz.id=e.id,this.userQuizzes.unshift(e.userQuiz);else{const t=this.userQuizzes.findIndex(t=>t.id==e.id);this.userQuizzes[t]=e.userQuiz}}loadUserQuizzes(e){this.isLoadingData=!0,void 0!==this.employees&&0!==this.employees.length||this.employeesService.getAll().subscribe(e=>{this.employees=[],e.docs.forEach(e=>{const t=this.employeesService.setEmployee(e.id,e.data());this.employees.push(t)})});let t=new Date;if(void 0!==e){const i=e.split("-");t=new Date(`${i[1]}/${i[2]}/${i[0]}`)}this.userQuizzesService.getByDate(t).subscribe(e=>{this.userQuizzes=[],e.docs.forEach(e=>{const t=this.userQuizzesService.setUserQuiz(e.id,e.data());t.employee=this.employees.find(e=>e.id===t.employeeId),this.userQuizzes.push(t)})},e=>{console.error(e)},()=>{this.isLoadingData=!1,this.filterData()})}filterData(){if(this.searchText){const e=this.searchText.toUpperCase();this.userQuizzesFiltered=this.userQuizzes.filter(t=>{var i,s;return t.date.toDateString().includes(e)||(null===(i=t.employee)||void 0===i?void 0:i.firstName.toUpperCase().includes(e))||(null===(s=t.employee)||void 0===s?void 0:s.lastName.toUpperCase().includes(e))})}else this.userQuizzesFiltered=this.userQuizzes;this.isLoadingData&&(this.isLoadingData=!1)}}return e.\u0275fac=function(t){return new(t||e)(c.Lb(n.b),c.Lb(u.a),c.Lb(p.a),c.Lb(h.a))},e.\u0275cmp=c.Fb({type:e,selectors:[["app-user-quizzes-list"]],decls:17,vars:4,consts:[[1,"container"],[1,"row","mt-3","mb-3"],[1,"col-lg-4"],[1,"form-group"],["type","date","placeholder","Fecha",1,"form-control"],["searchDatex",""],[1,"col-lg-8"],[1,"input-group"],["type","text","placeholder","Buscar",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],[1,"btn-group"],["type","button","title","Buscar",1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-search"],["type","button","title","Refrescar",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-refresh"],["class","table table-sm row-border table-hover","datatable","","style","width: 100%;","id","tblData",3,"dtOptions",4,"ngIf"],["datatable","","id","tblData",1,"table","table-sm","row-border","table-hover",2,"width","100%",3,"dtOptions"],[1,"text-center"],[4,"ngFor","ngForOf"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-default","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-file-o"],["aria-hidden","true",1,"fa","fa-trash"]],template:function(e,t){if(1&e){const e=c.Rb();c.Qb(0,"div",0),c.Qb(1,"div",1),c.Qb(2,"div",2),c.Qb(3,"div",3),c.Mb(4,"input",4,5),c.Pb(),c.Pb(),c.Qb(6,"div",6),c.Qb(7,"div",3),c.Qb(8,"div",7),c.Qb(9,"input",8),c.ac("ngModelChange",(function(e){return t.searchText=e})),c.Pb(),c.Qb(10,"span",9),c.Qb(11,"div",10),c.Qb(12,"button",11),c.ac("click",(function(){c.qc(e);const i=c.pc(5);return t.loadUserQuizzes(i.value)})),c.Mb(13,"i",12),c.Pb(),c.Qb(14,"button",13),c.ac("click",(function(){c.qc(e);const i=c.pc(5);return t.loadUserQuizzes(i.value)})),c.Mb(15,"i",14),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.Pb(),c.wc(16,Q,10,2,"table",15),c.Pb()}2&e&&(c.yb(9),c.ic("ngModel",t.searchText),c.yb(3),c.ic("disabled",t.isLoadingData),c.yb(2),c.ic("disabled",t.isLoadingData),c.yb(2),c.ic("ngIf",t.userQuizzesFiltered&&t.userQuizzesFiltered.length>0))},directives:[o.b,o.i,o.k,s.l,r.a,s.k],pipes:[s.d],styles:[""]}),e})(),data:{breadcrumb:null}},{path:"detail/:id",component:l,data:{breadcrumb:"Detalle"}},{path:"delete/:id",component:l,data:{breadcrumb:"Eliminar"}}]}];let f=(()=>{class e{}return e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({factory:function(t){return new(t||e)},imports:[[a.c.forChild(y)],a.c]}),e})(),z=(()=>{class e{}return e.\u0275mod=c.Jb({type:e}),e.\u0275inj=c.Ib({factory:function(t){return new(t||e)},providers:[p.a],imports:[[s.b,f,o.f,o.n,r.b]]}),e})()}}]);