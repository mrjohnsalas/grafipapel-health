(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"vQ+R":function(e,t,n){"use strict";n.r(t),n.d(t,"EmployeesModule",(function(){return z}));var r=n("ofXK"),i=n("3Pt+"),a=n("njyG"),o=n("tyNb"),s=n("fXoL"),c=n("1kSV");let d=(()=>{class e{constructor(e){this.activeModal=e}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(c.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-employees-detail"]],decls:12,vars:1,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"]],template:function(e,t){1&e&&(s.Qb(0,"div",0),s.Qb(1,"h4",1),s.yc(2,"Ver trabajador"),s.Pb(),s.Qb(3,"button",2),s.ac("click",(function(){return t.activeModal.dismiss("Cross click")})),s.Qb(4,"span",3),s.yc(5,"\xd7"),s.Pb(),s.Pb(),s.Pb(),s.Qb(6,"div",4),s.Qb(7,"p"),s.yc(8),s.Pb(),s.Pb(),s.Qb(9,"div",5),s.Qb(10,"button",6),s.ac("click",(function(){return t.activeModal.close("Close click")})),s.yc(11,"Cerrar"),s.Pb(),s.Pb()),2&e&&(s.yb(8),s.zc(t.employeeSelected.firstName+" "+t.employeeSelected.lastName))},styles:[""]}),e})();var b=function(e){return e[e.Todos=-1]="Todos",e[e.Anulado=0]="Anulado",e[e.Activo=1]="Activo",e}({}),l=n("oL12"),p=n("Cv5v");function m(e,t){if(1&e&&(s.Qb(0,"span"),s.yc(1),s.Pb()),2&e){const e=s.cc(2);s.yb(1),s.zc(e.appSettingsService.RequiredErrorMessage)}}function f(e,t){if(1&e&&(s.Qb(0,"span"),s.yc(1),s.Pb()),2&e){const e=s.cc(2);s.yb(1),s.Bc("",e.appSettingsService.MinLengthErrorMessage," ",e.dniLength,".")}}function h(e,t){if(1&e&&(s.Qb(0,"span"),s.yc(1),s.Pb()),2&e){const e=s.cc(2);s.yb(1),s.Bc("",e.appSettingsService.MaxLengthErrorMessage," ",e.dniLength,".")}}function u(e,t){if(1&e&&(s.Qb(0,"span",30),s.wc(1,m,2,1,"span",31),s.wc(2,f,2,2,"span",31),s.wc(3,h,2,2,"span",31),s.Pb()),2&e){const e=s.cc();s.yb(1),s.ic("ngIf",e.dni.errors.required),s.yb(1),s.ic("ngIf",e.dni.errors.minlength),s.yb(1),s.ic("ngIf",e.dni.errors.maxlength)}}function y(e,t){if(1&e&&(s.Qb(0,"span"),s.yc(1),s.Pb()),2&e){const e=s.cc(2);s.yb(1),s.zc(e.appSettingsService.RequiredErrorMessage)}}function g(e,t){if(1&e&&(s.Qb(0,"span"),s.yc(1),s.Pb()),2&e){const e=s.cc(2);s.yb(1),s.Bc("",e.appSettingsService.MinLengthErrorMessage," ",e.grafipapelIdLength,".")}}function v(e,t){if(1&e&&(s.Qb(0,"span"),s.yc(1),s.Pb()),2&e){const e=s.cc(2);s.yb(1),s.Bc("",e.appSettingsService.MaxLengthErrorMessage," ",e.grafipapelIdLength,".")}}function P(e,t){if(1&e&&(s.Qb(0,"span",30),s.wc(1,y,2,1,"span",31),s.wc(2,g,2,2,"span",31),s.wc(3,v,2,2,"span",31),s.Pb()),2&e){const e=s.cc();s.yb(1),s.ic("ngIf",e.grafipapelId.errors.required),s.yb(1),s.ic("ngIf",e.grafipapelId.errors.minlength),s.yb(1),s.ic("ngIf",e.grafipapelId.errors.maxlength)}}function Q(e,t){if(1&e&&(s.Qb(0,"span"),s.yc(1),s.Pb()),2&e){const e=s.cc(2);s.yb(1),s.zc(e.appSettingsService.RequiredErrorMessage)}}function M(e,t){if(1&e&&(s.Qb(0,"span"),s.yc(1),s.Pb()),2&e){const e=s.cc(2);s.yb(1),s.Bc("",e.appSettingsService.MaxLengthErrorMessage," ",e.firstNameMaxLength,".")}}function S(e,t){if(1&e&&(s.Qb(0,"span",30),s.wc(1,Q,2,1,"span",31),s.wc(2,M,2,2,"span",31),s.Pb()),2&e){const e=s.cc();s.yb(1),s.ic("ngIf",e.firstName.errors.required),s.yb(1),s.ic("ngIf",e.firstName.errors.maxlength)}}function N(e,t){if(1&e&&(s.Qb(0,"span"),s.yc(1),s.Pb()),2&e){const e=s.cc(2);s.yb(1),s.zc(e.appSettingsService.RequiredErrorMessage)}}function I(e,t){if(1&e&&(s.Qb(0,"span"),s.yc(1),s.Pb()),2&e){const e=s.cc(2);s.yb(1),s.Bc("",e.appSettingsService.MaxLengthErrorMessage," ",e.lastNameMaxLength,".")}}function L(e,t){if(1&e&&(s.Qb(0,"span",30),s.wc(1,N,2,1,"span",31),s.wc(2,I,2,2,"span",31),s.Pb()),2&e){const e=s.cc();s.yb(1),s.ic("ngIf",e.lastName.errors.required),s.yb(1),s.ic("ngIf",e.lastName.errors.maxlength)}}function x(e,t){if(1&e&&(s.Qb(0,"span"),s.yc(1),s.Pb()),2&e){const e=s.cc(2);s.yb(1),s.zc(e.appSettingsService.RequiredErrorMessage)}}function w(e,t){if(1&e&&(s.Qb(0,"span",30),s.wc(1,x,2,1,"span",31),s.Pb()),2&e){const e=s.cc();s.yb(1),s.ic("ngIf",e.dateOfBirth.errors.required)}}function C(e,t){if(1&e&&(s.Qb(0,"span"),s.yc(1),s.Pb()),2&e){const e=s.cc(2);s.yb(1),s.Bc("",e.appSettingsService.MaxLengthErrorMessage," ",e.addressMaxLength,".")}}function E(e,t){if(1&e&&(s.Qb(0,"span",30),s.wc(1,C,2,2,"span",31),s.Pb()),2&e){const e=s.cc();s.yb(1),s.ic("ngIf",e.address.errors.maxlength)}}function k(e,t){if(1&e&&(s.Qb(0,"span"),s.yc(1),s.Pb()),2&e){const e=s.cc(2);s.yb(1),s.Bc("",e.appSettingsService.MinLengthErrorMessage," ",e.phoneLength,".")}}function B(e,t){if(1&e&&(s.Qb(0,"span"),s.yc(1),s.Pb()),2&e){const e=s.cc(2);s.yb(1),s.Bc("",e.appSettingsService.MaxLengthErrorMessage," ",e.phoneLength,".")}}function O(e,t){if(1&e&&(s.Qb(0,"span",30),s.wc(1,k,2,2,"span",31),s.wc(2,B,2,2,"span",31),s.Pb()),2&e){const e=s.cc();s.yb(1),s.ic("ngIf",e.phone.errors.minlength),s.yb(1),s.ic("ngIf",e.phone.errors.maxlength)}}let q=(()=>{class e{constructor(e,t,n,r){this.appSettingsService=e,this.formBuilder=t,this.activeModal=n,this.employeesService=r,this.createMode=!0}get dni(){return this.form.get("dni")}get grafipapelId(){return this.form.get("grafipapelId")}get firstName(){return this.form.get("firstName")}get lastName(){return this.form.get("lastName")}get address(){return this.form.get("address")}get phone(){return this.form.get("phone")}get dateOfBirth(){return this.form.get("dateOfBirth")}get employeeType(){return this.form.get("employeeType")}get canEnter(){return this.form.get("canEnter")}ngOnInit(){this.form=this.formBuilder.group({dni:["",[i.p.required,i.p.minLength(this.dniLength),i.p.maxLength(this.dniLength)]],grafipapelId:["",[i.p.required,i.p.minLength(this.grafipapelIdLength),i.p.maxLength(this.grafipapelIdLength)]],firstName:["",[i.p.required,i.p.maxLength(this.firstNameMaxLength)]],lastName:["",[i.p.required,i.p.maxLength(this.lastNameMaxLength)]],address:["",[i.p.maxLength(this.addressMaxLength)]],phone:["",[i.p.minLength(this.phoneLength),i.p.maxLength(this.phoneLength)]],dateOfBirth:["",[i.p.required]],employeeType:["",[i.p.required]],canEnter:[!0]}),this.createMode||this.loadEmployee(this.employeeSelected)}save(){if(this.form.invalid)return;const e=this.form.value;this.createMode?(e.statusType=b.Activo,this.employeesService.create(e).then(t=>{this.onSuccessSave(e,t)}).catch(e=>{console.error(e)})):this.employeesService.edit(e).then(t=>{this.onSuccessSave(e)}).catch(e=>{console.error(e)})}onSuccessSave(e,t){this.activeModal.dismiss({employee:e,id:e?e.id:t.id,createMode:this.createMode})}loadEmployee(e){this.form.patchValue(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(l.a),s.Lb(i.c),s.Lb(c.a),s.Lb(p.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-employees-form"]],decls:60,vars:12,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"",3,"formGroup","ngSubmit"],[1,"form-group"],["for","employeeType"],["formControlName","employeeType",1,"form-control"],[3,"ngValue"],["for","dni"],["type","text","name","dni","id","dni","placeholder","DNI","formControlName","dni",1,"form-control"],["class","text-danger",4,"ngIf"],["for","grafipapelId"],["type","text","name","grafipapelId","id","grafipapelId","placeholder","Grafipapel Id","formControlName","grafipapelId",1,"form-control"],["for","firstName"],["type","text","name","firstName","id","firstName","placeholder","Nombres","formControlName","firstName",1,"form-control"],["for","lastName"],["type","text","name","lastName","id","lastName","placeholder","Apellidos","formControlName","lastName",1,"form-control"],["for","dateOfBirth"],["type","date","name","dateOfBirth","id","dateOfBirth","placeholder","Fec. Nacimiento","formControlName","dateOfBirth",1,"form-control"],["for","address"],["type","text","name","address","id","address","placeholder","Direcci\xf3n","formControlName","address",1,"form-control"],["for","phone"],["type","number","name","phone","id","phone","placeholder","Celular","formControlName","phone",1,"form-control"],["for","canEnter"],["type","checkbox","name","canEnter","id","canEnter","formControlName","canEnter",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[1,"btn","btn-primary",3,"disabled","click"],[1,"text-danger"],[4,"ngIf"]],template:function(e,t){1&e&&(s.Qb(0,"div",0),s.Qb(1,"h4",1),s.yc(2),s.Pb(),s.Qb(3,"button",2),s.ac("click",(function(){return t.activeModal.dismiss("Cross click")})),s.Qb(4,"span",3),s.yc(5,"\xd7"),s.Pb(),s.Pb(),s.Pb(),s.Qb(6,"div",4),s.Qb(7,"form",5),s.ac("ngSubmit",(function(){return t.save()})),s.Qb(8,"div",6),s.Qb(9,"label",7),s.yc(10,"Tipo:"),s.Pb(),s.Qb(11,"select",8),s.Qb(12,"option",9),s.yc(13,"Empleado"),s.Pb(),s.Qb(14,"option",9),s.yc(15,"Obrero"),s.Pb(),s.Pb(),s.Pb(),s.Qb(16,"div",6),s.Qb(17,"label",10),s.yc(18,"DNI:"),s.Pb(),s.Mb(19,"input",11),s.wc(20,u,4,3,"span",12),s.Pb(),s.Qb(21,"div",6),s.Qb(22,"label",13),s.yc(23,"Grafipapel Id:"),s.Pb(),s.Mb(24,"input",14),s.wc(25,P,4,3,"span",12),s.Pb(),s.Qb(26,"div",6),s.Qb(27,"label",15),s.yc(28,"Nombres:"),s.Pb(),s.Mb(29,"input",16),s.wc(30,S,3,2,"span",12),s.Pb(),s.Qb(31,"div",6),s.Qb(32,"label",17),s.yc(33,"Apellidos:"),s.Pb(),s.Mb(34,"input",18),s.wc(35,L,3,2,"span",12),s.Pb(),s.Qb(36,"div",6),s.Qb(37,"label",19),s.yc(38,"Fec. Nacimiento:"),s.Pb(),s.Mb(39,"input",20),s.wc(40,w,2,1,"span",12),s.Pb(),s.Qb(41,"div",6),s.Qb(42,"label",21),s.yc(43,"Direcci\xf3n:"),s.Pb(),s.Mb(44,"input",22),s.wc(45,E,2,1,"span",12),s.Pb(),s.Qb(46,"div",6),s.Qb(47,"label",23),s.yc(48,"Celular:"),s.Pb(),s.Mb(49,"input",24),s.wc(50,O,3,2,"span",12),s.Pb(),s.Qb(51,"div",6),s.Qb(52,"label",25),s.yc(53,"\xbfPuede ingresar?"),s.Pb(),s.Mb(54,"input",26),s.Pb(),s.Pb(),s.Pb(),s.Qb(55,"div",27),s.Qb(56,"button",28),s.ac("click",(function(){return t.activeModal.close("Close click")})),s.yc(57,"Cancelar"),s.Pb(),s.Qb(58,"button",29),s.ac("click",(function(){return t.save()})),s.yc(59,"Crear"),s.Pb(),s.Pb()),2&e&&(s.yb(2),s.Ac("",t.createMode?"Crear":"Editar"," trabajador"),s.yb(5),s.ic("formGroup",t.form),s.yb(5),s.ic("ngValue",1),s.yb(2),s.ic("ngValue",2),s.yb(6),s.ic("ngIf",(t.dni.dirty||t.dni.touched)&&t.dni.errors),s.yb(5),s.ic("ngIf",(t.grafipapelId.dirty||t.grafipapelId.touched)&&t.grafipapelId.errors),s.yb(5),s.ic("ngIf",(t.firstName.dirty||t.firstName.touched)&&t.firstName.errors),s.yb(5),s.ic("ngIf",(t.lastName.dirty||t.lastName.touched)&&t.lastName.errors),s.yb(5),s.ic("ngIf",(t.dateOfBirth.dirty||t.dateOfBirth.touched)&&t.dateOfBirth.errors),s.yb(5),s.ic("ngIf",(t.address.dirty||t.address.touched)&&t.address.errors),s.yb(5),s.ic("ngIf",(t.phone.dirty||t.phone.touched)&&t.phone.errors),s.yb(8),s.ic("disabled",t.form.invalid))},directives:[i.r,i.j,i.e,i.o,i.i,i.d,i.l,i.q,i.b,r.l,i.m,i.a],styles:[""]}),e})();function F(e,t){if(1&e){const e=s.Rb();s.Qb(0,"tr"),s.Qb(1,"td"),s.yc(2),s.Pb(),s.Qb(3,"td"),s.yc(4),s.Pb(),s.Qb(5,"td",10),s.Qb(6,"div",12),s.Qb(7,"button",13),s.ac("click",(function(){s.qc(e);const n=t.$implicit;return s.cc(2).view(n)})),s.Mb(8,"i",14),s.Pb(),s.Qb(9,"button",13),s.ac("click",(function(){s.qc(e);const n=t.$implicit;return s.cc(2).edit(n)})),s.Mb(10,"i",15),s.Pb(),s.Qb(11,"button",13),s.ac("click",(function(){s.qc(e);const n=t.$implicit,r=t.index;return s.cc(2).delete(n.id,r)})),s.Mb(12,"i",16),s.Pb(),s.Pb(),s.Pb(),s.Pb()}if(2&e){const e=t.$implicit;s.yb(2),s.zc(e.dni),s.yb(2),s.zc(e.firstName+" "+e.lastName)}}function T(e,t){if(1&e&&(s.Qb(0,"table",9),s.Qb(1,"thead"),s.Qb(2,"tr"),s.Qb(3,"th",10),s.yc(4,"Dni"),s.Pb(),s.Qb(5,"th",10),s.yc(6,"Nombre completo"),s.Pb(),s.Mb(7,"th",10),s.Pb(),s.Pb(),s.Qb(8,"tbody"),s.wc(9,F,13,2,"tr",11),s.Pb(),s.Pb()),2&e){const e=s.cc();s.ic("dtOptions",e.dtOptions),s.yb(9),s.ic("ngForOf",e.employees)}}const A=[{path:"",children:[{path:"",component:(()=>{class e{constructor(e,t,n){this.modalService=e,this.appSettingsService=t,this.employeesService=n,this.employees=[],this.dtOptions={info:!0,lengthChange:!1,processing:!0,searching:!1,responsive:!0,pagingType:"full_numbers",pageLength:15,dom:'<"html5buttons"B>lftip',buttons:[{extend:"copy",className:"btn-sm"},{extend:"csv",title:"Lista de trabajadores",className:"btn-sm"},{extend:"excel",title:"Lista de trabajadores",className:"btn-sm"},{extend:"pdf",title:"Lista de trabajadores",className:"btn-sm"},{extend:"print",title:"Lista de trabajadores",className:"btn-sm",customize(e){$(e.document.body).addClass("white-bg"),$(e.document.body).css("font-size","10px"),$(e.document.body).find("table").addClass("compact").css("font-size","inherit")}}],language:{emptyTable:"No hay datos disponibles",info:"Mostrando desde _START_ hasta _END_ de _TOTAL_ registros",infoEmpty:"Mostrando desde 0 hasta 0 de 0 registros",loadingRecords:"Cargando...",processing:"Procesando...",paginate:{first:"Ini.",last:"Fin",next:"Sig.",previous:"Ant."}},columnDefs:[{targets:0,responsivePriority:10001},{targets:1,responsivePriority:1},{targets:2,orderable:!1,responsivePriority:2}]}}ngOnInit(){this.loadEmployees()}add(){this.modalService.open(q).result.then(this.onCloseModalForm.bind(this),this.onCloseModalForm.bind(this))}edit(e){const t=this.modalService.open(q);t.result.then(this.onCloseModalForm.bind(this),this.onCloseModalForm.bind(this)),t.componentInstance.createMode=!1,t.componentInstance.employeeSelected=e}view(e){const t=this.modalService.open(d);t.result.then(this.onCloseModalForm.bind(this),this.onCloseModalForm.bind(this)),t.componentInstance.employeeSelected=e}delete(e,t){this.employeesService.delete(e).then(()=>{this.employees.splice(t,1)}).catch(e=>{console.error(e)})}onCloseModalForm(e){if(e===Object(e))if(e.createMode)e.employee.id=e.id,this.employees.unshift(e.employee);else{const t=this.employees.findIndex(t=>t.id==e.id);this.employees[t]=e.employee}}loadEmployees(){this.employeesService.getAll().subscribe(e=>{this.employees=[],e.docs.forEach(e=>{const t=this.employeesService.setEmployee(e.id,e.data());this.employees.push(t)})})}}return e.\u0275fac=function(t){return new(t||e)(s.Lb(c.b),s.Lb(l.a),s.Lb(p.a))},e.\u0275cmp=s.Fb({type:e,selectors:[["app-employees-list"]],decls:9,vars:1,consts:[[1,"container"],[1,"input-group","mb-3","mt-3"],["type","text","placeholder","Buscar","aria-label","Buscar","aria-describedby","basic-addon2",1,"form-control"],[1,"input-group-append"],["type","button",1,"btn","btn-outline-secondary"],["aria-hidden","true",1,"fa","fa-search"],[1,"btn","btn-primary","float-right","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-plus"],["class","table table-sm row-border table-hover","datatable","","style","width: 100%;",3,"dtOptions",4,"ngIf"],["datatable","",1,"table","table-sm","row-border","table-hover",2,"width","100%",3,"dtOptions"],[1,"text-center"],[4,"ngFor","ngForOf"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-default","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-file-o"],["aria-hidden","true",1,"fa","fa-pencil"],["aria-hidden","true",1,"fa","fa-trash"]],template:function(e,t){1&e&&(s.Qb(0,"div",0),s.Qb(1,"div",1),s.Mb(2,"input",2),s.Qb(3,"div",3),s.Qb(4,"button",4),s.Mb(5,"i",5),s.Pb(),s.Pb(),s.Pb(),s.Qb(6,"button",6),s.ac("click",(function(){return t.add()})),s.Mb(7,"i",7),s.Pb(),s.wc(8,T,10,2,"table",8),s.Pb()),2&e&&(s.yb(8),s.ic("ngIf",t.employees&&t.employees.length>0))},directives:[r.l,a.a,r.k],styles:[""]}),e})(),data:{breadcrumb:null}},{path:"detail/:id",component:d,data:{breadcrumb:"Detalle"}},{path:"delete/:id",component:d,data:{breadcrumb:"Eliminar"}},{path:"create",component:q,data:{breadcrumb:"Nuevo"}},{path:"edit/:id",component:q,data:{breadcrumb:"Editar"}}]}];let j=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},imports:[[o.c.forChild(A)],o.c]}),e})(),z=(()=>{class e{}return e.\u0275mod=s.Jb({type:e}),e.\u0275inj=s.Ib({factory:function(t){return new(t||e)},providers:[p.a],imports:[[r.b,j,i.f,i.n,a.b]]}),e})()}}]);