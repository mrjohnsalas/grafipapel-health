!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function i(e,i,s){return i&&t(e.prototype,i),s&&t(e,s),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{MmdM:function(t,s,n){"use strict";n.r(s),n.d(s,"UserQuizzesModule",(function(){return M}));var a=n("ofXK"),r=n("3Pt+"),o=n("njyG"),c=n("tyNb"),b=n("fXoL"),d=n("1kSV");function l(e,t){if(1&e&&(b.Qb(0,"tr"),b.Qb(1,"td"),b.yc(2),b.Pb(),b.Qb(3,"td",15),b.yc(4),b.Pb(),b.Pb()),2&e){var i=t.$implicit,s=b.cc(2);b.yb(2),b.zc(i.name),b.yb(2),b.zc(s.getOption(i).name)}}function u(e,t){if(1&e&&(b.Qb(0,"table",14),b.Qb(1,"thead"),b.Qb(2,"tr"),b.Qb(3,"th",15),b.yc(4,"Pregunta"),b.Pb(),b.Qb(5,"th",15),b.yc(6,"Respuesta"),b.Pb(),b.Pb(),b.Pb(),b.Qb(7,"tbody"),b.wc(8,l,5,2,"tr",16),b.Pb(),b.Pb()),2&e){var i=b.cc();b.yb(8),b.ic("ngForOf",i.userQuizSelected.quiz.questions)}}var p,f=((p=function(){function t(i){e(this,t),this.activeModal=i}return i(t,[{key:"ngOnInit",value:function(){}},{key:"getOption",value:function(e){var t;return e.options.forEach((function(e){e.selected&&(t=e)})),t}}]),t}()).\u0275fac=function(e){return new(e||p)(b.Lb(d.a))},p.\u0275cmp=b.Fb({type:p,selectors:[["app-user-quizzes-detail"]],decls:37,vars:7,consts:[[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row","mb-3"],[1,"col-lg-12"],[1,"row","mb-0"],[1,"col-sm-4","text-sm-right"],[1,"col-sm-8","text-sm-left"],[1,"mb-1"],["class","table table-sm row-border table-hover",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-outline-dark",3,"click"],[1,"table","table-sm","row-border","table-hover"],[1,"text-center"],[4,"ngFor","ngForOf"]],template:function(e,t){1&e&&(b.Qb(0,"div",0),b.Qb(1,"h4",1),b.yc(2,"Ver registro"),b.Pb(),b.Qb(3,"button",2),b.ac("click",(function(){return t.activeModal.dismiss("Cross click")})),b.Qb(4,"span",3),b.yc(5,"\xd7"),b.Pb(),b.Pb(),b.Pb(),b.Qb(6,"div",4),b.Qb(7,"div",5),b.Qb(8,"div",6),b.Qb(9,"dl",7),b.Qb(10,"div",8),b.Qb(11,"dt"),b.yc(12,"DNI:"),b.Pb(),b.Pb(),b.Qb(13,"div",9),b.Qb(14,"dd",10),b.yc(15),b.Pb(),b.Pb(),b.Pb(),b.Qb(16,"dl",7),b.Qb(17,"div",8),b.Qb(18,"dt"),b.yc(19,"Nombre completo:"),b.Pb(),b.Pb(),b.Qb(20,"div",9),b.Qb(21,"dd",10),b.yc(22),b.Pb(),b.Pb(),b.Pb(),b.Qb(23,"dl",7),b.Qb(24,"div",8),b.Qb(25,"dt"),b.yc(26,"Fec. Registro:"),b.Pb(),b.Pb(),b.Qb(27,"div",9),b.Qb(28,"dd",10),b.yc(29),b.dc(30,"date"),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Qb(31,"div",5),b.Qb(32,"div",6),b.wc(33,u,9,1,"table",11),b.Pb(),b.Pb(),b.Pb(),b.Qb(34,"div",12),b.Qb(35,"button",13),b.ac("click",(function(){return t.activeModal.close("Close click")})),b.yc(36,"Cerrar"),b.Pb(),b.Pb()),2&e&&(b.yb(15),b.zc(t.userQuizSelected.employee.dni),b.yb(7),b.zc(t.userQuizSelected.employee.firstName+" "+t.userQuizSelected.employee.lastName),b.yb(7),b.zc(b.fc(30,4,t.userQuizSelected.date,"yyyy-MM-dd hh:mm a")),b.yb(4),b.ic("ngIf",t.userQuizSelected))},directives:[a.l,a.k],pipes:[a.d],styles:[""]}),p),h=n("oL12"),m=n("vpgt"),y=n("Cv5v");function v(e,t){if(1&e){var i=b.Rb();b.Qb(0,"tr"),b.Qb(1,"td"),b.yc(2),b.dc(3,"date"),b.Pb(),b.Qb(4,"td"),b.yc(5),b.Pb(),b.Qb(6,"td",17),b.Qb(7,"div",19),b.Qb(8,"button",20),b.ac("click",(function(){b.qc(i);var e=t.$implicit;return b.cc(2).view(e)})),b.Mb(9,"i",21),b.Pb(),b.Qb(10,"button",20),b.ac("click",(function(){b.qc(i);var e=t.$implicit,s=t.index;return b.cc(2).delete(e.id,s)})),b.Mb(11,"i",22),b.Pb(),b.Pb(),b.Pb(),b.Pb()}if(2&e){var s=t.$implicit;b.yb(2),b.zc(b.fc(3,2,s.date,"yyyy-MM-dd hh:mm a")),b.yb(3),b.zc(s.employee.firstName+" "+s.employee.lastName)}}function Q(e,t){if(1&e&&(b.Qb(0,"table",16),b.Qb(1,"thead"),b.Qb(2,"tr"),b.Qb(3,"th",17),b.yc(4,"Fecha"),b.Pb(),b.Qb(5,"th",17),b.yc(6,"Nombre completo"),b.Pb(),b.Mb(7,"th",17),b.Pb(),b.Pb(),b.Qb(8,"tbody"),b.wc(9,v,12,5,"tr",18),b.Pb(),b.Pb()),2&e){var i=b.cc();b.ic("dtOptions",i.dtOptions),b.yb(9),b.ic("ngForOf",i.userQuizzesFiltered)}}var g,z,P,w=[{path:"",children:[{path:"",component:(g=function(){function t(i,s,n,a){e(this,t),this.modalService=i,this.appSettingsService=s,this.userQuizzesService=n,this.employeesService=a,this.userQuizzes=[],this.userQuizzesFiltered=[],this.isLoadingData=!1,this.searchText="",this.employees=[],this.dtOptions={info:!0,lengthChange:!1,processing:!0,searching:!1,responsive:!0,pagingType:"full_numbers",pageLength:15,dom:'<"html5buttons"B>lftip',buttons:[{extend:"copy",className:"btn-sm"},{extend:"csv",title:"Lista de registros",className:"btn-sm"},{extend:"excel",title:"Lista de registros",className:"btn-sm"},{extend:"pdf",title:"Lista de registros",className:"btn-sm"},{extend:"print",title:"Lista de registros",className:"btn-sm",customize:function(e){$(e.document.body).addClass("white-bg"),$(e.document.body).css("font-size","10px"),$(e.document.body).find("table").addClass("compact").css("font-size","inherit")}}],language:{emptyTable:"No hay datos disponibles",info:"Mostrando desde _START_ hasta _END_ de _TOTAL_ registros",infoEmpty:"Mostrando desde 0 hasta 0 de 0 registros",loadingRecords:"Cargando...",processing:"Procesando...",paginate:{first:"Ini.",last:"Fin",next:"Sig.",previous:"Ant."}},columnDefs:[{targets:0,responsivePriority:10001},{targets:1,responsivePriority:1},{targets:2,orderable:!1,responsivePriority:2}]}}return i(t,[{key:"ngOnInit",value:function(){this.loadUserQuizzes()}},{key:"view",value:function(e){var t=this.modalService.open(f,{size:"lg"});t.result.then(this.onCloseModalForm.bind(this),this.onCloseModalForm.bind(this)),t.componentInstance.userQuizSelected=e}},{key:"delete",value:function(e,t){var i=this;this.userQuizzesService.delete(e).then((function(){i.userQuizzes.splice(t,1)})).catch((function(e){console.error(e)}))}},{key:"onCloseModalForm",value:function(e){if(e===Object(e))if(e.createMode)e.userQuiz.id=e.id,this.userQuizzes.unshift(e.userQuiz);else{var t=this.userQuizzes.findIndex((function(t){return t.id==e.id}));this.userQuizzes[t]=e.userQuiz}}},{key:"loadUserQuizzes",value:function(e){var t=this;this.isLoadingData=!0,void 0!==this.employees&&0!==this.employees.length||this.employeesService.getAll().subscribe((function(e){t.employees=[],e.docs.forEach((function(e){var i=t.employeesService.setEmployee(e.id,e.data());t.employees.push(i)}))}));var i=new Date;if(void 0!==e){var s=e.split("-");i=new Date("".concat(s[1],"/").concat(s[2],"/").concat(s[0]))}this.userQuizzesService.getByDate(i).subscribe((function(e){t.userQuizzes=[],e.docs.forEach((function(e){var i=t.userQuizzesService.setUserQuiz(e.id,e.data());i.employee=t.employees.find((function(e){return e.id===i.employeeId})),t.userQuizzes.push(i)}))}),(function(e){console.error(e)}),(function(){t.isLoadingData=!1,t.filterData()}))}},{key:"filterData",value:function(){if(this.searchText){var e=this.searchText.toUpperCase();this.userQuizzesFiltered=this.userQuizzes.filter((function(t){var i,s;return t.date.toDateString().includes(e)||(null===(i=t.employee)||void 0===i?void 0:i.firstName.toUpperCase().includes(e))||(null===(s=t.employee)||void 0===s?void 0:s.lastName.toUpperCase().includes(e))}))}else this.userQuizzesFiltered=this.userQuizzes;this.isLoadingData&&(this.isLoadingData=!1)}}]),t}(),g.\u0275fac=function(e){return new(e||g)(b.Lb(d.b),b.Lb(h.a),b.Lb(m.a),b.Lb(y.a))},g.\u0275cmp=b.Fb({type:g,selectors:[["app-user-quizzes-list"]],decls:17,vars:4,consts:[[1,"container"],[1,"row","mt-3","mb-3"],[1,"col-lg-4"],[1,"form-group"],["type","date","placeholder","Fecha",1,"form-control"],["searchDatex",""],[1,"col-lg-8"],[1,"input-group"],["type","text","placeholder","Buscar",1,"form-control",3,"ngModel","ngModelChange"],[1,"input-group-append"],[1,"btn-group"],["type","button","title","Buscar",1,"btn","btn-primary",3,"disabled","click"],[1,"fa","fa-search"],["type","button","title","Refrescar",1,"btn","btn-success",3,"disabled","click"],[1,"fa","fa-refresh"],["class","table table-sm row-border table-hover","datatable","","style","width: 100%;","id","tblData",3,"dtOptions",4,"ngIf"],["datatable","","id","tblData",1,"table","table-sm","row-border","table-hover",2,"width","100%",3,"dtOptions"],[1,"text-center"],[4,"ngFor","ngForOf"],["role","group","aria-label","Basic example",1,"btn-group"],["type","button",1,"btn","btn-default","btn-sm",3,"click"],["aria-hidden","true",1,"fa","fa-file-o"],["aria-hidden","true",1,"fa","fa-trash"]],template:function(e,t){if(1&e){var i=b.Rb();b.Qb(0,"div",0),b.Qb(1,"div",1),b.Qb(2,"div",2),b.Qb(3,"div",3),b.Mb(4,"input",4,5),b.Pb(),b.Pb(),b.Qb(6,"div",6),b.Qb(7,"div",3),b.Qb(8,"div",7),b.Qb(9,"input",8),b.ac("ngModelChange",(function(e){return t.searchText=e})),b.Pb(),b.Qb(10,"span",9),b.Qb(11,"div",10),b.Qb(12,"button",11),b.ac("click",(function(){b.qc(i);var e=b.pc(5);return t.loadUserQuizzes(e.value)})),b.Mb(13,"i",12),b.Pb(),b.Qb(14,"button",13),b.ac("click",(function(){b.qc(i);var e=b.pc(5);return t.loadUserQuizzes(e.value)})),b.Mb(15,"i",14),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.Pb(),b.wc(16,Q,10,2,"table",15),b.Pb()}2&e&&(b.yb(9),b.ic("ngModel",t.searchText),b.yb(3),b.ic("disabled",t.isLoadingData),b.yb(2),b.ic("disabled",t.isLoadingData),b.yb(2),b.ic("ngIf",t.userQuizzesFiltered&&t.userQuizzesFiltered.length>0))},directives:[r.b,r.i,r.k,a.l,o.a,a.k],pipes:[a.d],styles:[""]}),g),data:{breadcrumb:null}},{path:"detail/:id",component:f,data:{breadcrumb:"Detalle"}},{path:"delete/:id",component:f,data:{breadcrumb:"Eliminar"}}]}],k=((P=function t(){e(this,t)}).\u0275mod=b.Jb({type:P}),P.\u0275inj=b.Ib({factory:function(e){return new(e||P)},imports:[[c.c.forChild(w)],c.c]}),P),M=((z=function t(){e(this,t)}).\u0275mod=b.Jb({type:z}),z.\u0275inj=b.Ib({factory:function(e){return new(e||z)},providers:[m.a],imports:[[a.b,k,r.f,r.n,o.b]]}),z)}}])}();